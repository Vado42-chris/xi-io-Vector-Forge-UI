/* App Layout - CSS Grid - NO INLINE STYLES */
/* Standard productized UI: Header | Main Content | Timeline | Footer */
.app-layout-grid {
  position: relative;
  width: 100vw;
  height: 100vh;
  color: var(--xibalba-text-000);
  font-family: var(--font-sans, sans-serif);
  overflow: hidden;
  background: var(--xibalba-grey-000);
  display: grid;
  grid-template-rows: auto 1fr auto auto; /* Header | Main Content | Timeline | Footer */
  grid-template-columns: auto 1fr auto;
  min-height: 100vh;
  isolation: isolate; /* Isolate grid from external styles */
}

.app-header-container {
  grid-row: 1 / 2;
  grid-column: 1 / 4;
  position: sticky;
  top: 0;
  z-index: var(--z-menu, 1100);
  isolation: isolate; /* Isolate header from other components */
  contain: layout style paint; /* Contain header layout */
  overflow: visible; /* Allow dropdowns to show */
}

.app-main-content {
  grid-row: 2 / 3;
  grid-column: 1 / 4;
  display: flex;
  height: 100%;
  min-height: 0; /* Allow flex shrinking */
  isolation: isolate; /* Isolate main content from header */
  contain: layout; /* Contain layout to prevent bleeding */
  position: relative;
  overflow: hidden; /* Prevent content from spilling */
}

.app-canvas-area {
  flex: 1;
  position: relative;
  overflow: hidden;
  background: var(--xibalba-grey-000);
  isolation: isolate; /* Isolate canvas from sidebars and header */
  contain: layout paint; /* Contain canvas layout and painting */
  z-index: var(--z-canvas, 10); /* Canvas below sidebars but above background */
  /* Account for fixed left sidebar - canvas starts after sidebar */
  margin-left: var(--sidebar-left-width, 320px);
  /* Account for fixed right sidebar - canvas ends before sidebar */
  margin-right: var(--sidebar-right-width, 360px);
  /* Width accounts for both sidebars */
  width: calc(100% - var(--sidebar-left-width, 320px) - var(--sidebar-right-width, 360px));
  min-width: 0; /* Allow flex shrinking */
}

/* Timeline Container - In grid, NO FIXED POSITIONING */
.app-timeline-container {
  grid-row: 3 / 4;
  grid-column: 1 / 4;
  position: relative;
  z-index: var(--z-timeline-expanded, 100);
  isolation: isolate;
  contain: layout style paint;
  height: 200px; /* Default timeline height */
  min-height: 200px;
  max-height: 400px; /* Allow expansion */
  overflow: hidden;
  width: 100%;
  display: flex;
  flex-direction: column;
}

/* Timeline inside grid container - NO fixed positioning */
.app-timeline-container > * {
  position: relative !important;
  width: 100% !important;
  height: 100% !important;
  bottom: auto !important;
  left: auto !important;
  right: auto !important;
}

/* Footer Container - Fixed at very bottom */
.app-footer-container {
  grid-row: 4 / 5;
  grid-column: 1 / 4;
  position: relative;
  z-index: var(--z-timeline-expanded, 100);
  isolation: isolate;
  contain: layout style paint;
  height: 48px; /* Footer height */
  min-height: 48px;
  max-height: 48px;
}

