/* App Layout - CSS Grid - NO INLINE STYLES */
/* Standard productized UI: Header | Main Content | Timeline | Footer */
.app-layout-grid {
  position: relative;
  width: 100vw !important;
  height: 100vh !important;
  color: var(--xibalba-text-000);
  font-family: var(--font-sans, sans-serif);
  overflow: hidden;
  background: var(--xibalba-grey-000);
  display: grid !important;
  grid-template-rows: auto 1fr auto !important; /* Header | Main Content | Footer - NO GAPS, NO TIMELINE ROW */
  grid-template-columns: auto 1fr auto;
  grid-gap: 0 !important; /* NO GAPS BETWEEN ROWS */
  gap: 0 !important; /* NO GAPS */
  min-height: 100vh !important;
  max-height: 100vh !important; /* CRITICAL: Don't exceed viewport */
  isolation: isolate; /* Isolate grid from external styles */
}

.app-header-container {
  grid-row: 1 / 2;
  grid-column: 1 / 4;
  position: sticky;
  top: 0;
  z-index: var(--z-menu, 1100);
  isolation: isolate; /* Isolate header from other components */
  contain: layout style paint; /* Contain header layout */
  overflow: visible; /* Allow dropdowns to show */
}

.app-main-content {
  grid-row: 2 / 3;
  grid-column: 1 / 4;
  display: block !important; /* Changed from flex - canvas is absolute */
  height: 100% !important; /* CRITICAL: Fill grid cell exactly */
  min-height: 0 !important; /* CRITICAL: Allow flex shrinking */
  max-height: 100% !important; /* CRITICAL: Don't exceed grid cell */
  isolation: isolate; /* Isolate main content from header */
  contain: layout; /* Contain layout to prevent bleeding */
  position: relative !important; /* CRITICAL: Positioning context for absolute canvas */
  overflow: hidden !important; /* Prevent content from spilling */
  margin: 0 !important;
  padding: 0 !important;
  /* CRITICAL: Ensure this fills grid row 2 completely - no gaps */
  align-self: stretch !important;
  justify-self: stretch !important;
}

.app-canvas-area {
  position: absolute !important; /* CRITICAL: Absolute positioning to fill parent */
  top: 0 !important;
  bottom: 0 !important;
  left: var(--sidebar-left-width, 320px) !important;
  right: var(--sidebar-right-width, 360px) !important;
  width: auto !important; /* Let left/right handle width */
  height: 100% !important; /* Fill parent completely - CRITICAL */
  min-height: 100% !important; /* Ensure minimum fill */
  max-height: 100% !important; /* Don't exceed parent */
  overflow: hidden;
  background: var(--xibalba-grey-000) !important; /* Ensure background fills */
  isolation: isolate; /* Isolate canvas from sidebars and header */
  contain: layout paint; /* Contain canvas layout and painting */
  z-index: var(--z-canvas, 10); /* Canvas below sidebars but above background */
  margin: 0 !important;
  padding: 0 !important;
}

/* Timeline Container - REMOVED - BottomDrawer is now fixed overlay, not in grid */
/* .app-timeline-container removed - BottomDrawer uses position: fixed */

/* Timeline inside grid container - FILLS CONTAINER EXACTLY, NO WRAPPER SPACE */
.app-timeline-container > *,
.app-timeline-container .xibalba-timeline,
.app-timeline-container .animation-timeline-container {
  position: relative !important;
  width: 100% !important;
  height: 100% !important;
  min-height: 100% !important;
  max-height: 100% !important;
  bottom: auto !important;
  left: auto !important;
  right: auto !important;
  margin: 0 !important;
  padding: 0 !important;
  flex: 1 1 100% !important;
}

/* Footer Container - Fixed at very bottom, NO GAPS */
.app-footer-container {
  grid-row: 4 / 5;
  grid-column: 1 / 4;
  position: relative;
  z-index: var(--z-timeline-expanded, 100);
  isolation: isolate;
  contain: layout style paint;
  height: 48px; /* Footer height - EXACT */
  min-height: 48px;
  max-height: 48px;
  margin: 0 !important;
  padding: 0 !important;
  gap: 0 !important;
}

